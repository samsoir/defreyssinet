
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Running application unit tests from the command line in Xcode 4.6 - Sam de Freyssinet</title>
  <meta name="author" content="Sam de Freyssinet">

  
  <meta name="description" content="OCUnit (also known as SenTest) is the unit testing framework that Apple now bundles with Xcode. It has been a component of their software development &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://def.reyssi.net/blog/2013/03/10/running-application-unit-tests-from-the-command-line-in-xcode-4-dot-6/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/defreyssinet" rel="alternate" title="Sam de Freyssinet" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28327797-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Sam de Freyssinet</a></h1>
  
    <h2>An archive of thoughts and discoveries in the world of software development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/defreyssinet" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:def.reyssi.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/speaking">Speaking</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Running Application Unit Tests From the Command Line in Xcode 4.6</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-10T15:53:00-05:00" pubdate data-updated="true">Mar 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><em>OCUnit</em> (also known as <em>SenTest</em>) is the unit testing framework that Apple now bundles with Xcode. It has been a component of their software development kit since Xcode was at version 2.1, back in the summer of 2005. One of the nice things about OCUnit was that you could execute the tests in Xcode, or alternatively from the command line. The latter option is essential if you are using the continuous integration environment to build your iOS or Mac application. However when Apple released Xcode 4.5 with iOS SDK 6.0 they subtly changed the way OCUnit works. This prevented the existing command line interface from working. But more infuriating was that the build and test process would still  exit with a zero status. This ensured that Jenkins would report the unit tests had run without issue.</p>

<!-- more -->


<p>It took me a couple of weeks to notice that our unit tests build job was not actually running the test suite anymore. There were only a couple of clues that something was not right;</p>

<ol>
<li>The unit test job was running much faster than it used to.</li>
<li>I had pushed code with an intentional failing test and watched our build server pass it as working.</li>
</ol>


<p>After further inspection of the build jobs logs, I discovered the following ominous statement nestled in the output.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Unknown Device Type. Using UIUserInterfaceIdiomPad based on screen size
</span><span class='line'>Terminating since there is no workspace.</span></code></pre></td></tr></table></div></figure>


<p>One of the subtle changes Apple made to OCUnit in Xcode 4.5 was to separate their unit tests into two logical domains, <em>logic tests</em> and <em>application tests</em>. To Apple&#8217;s credit they have <a href="http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/01-Unit-Test_Overview/overview.html">documented this change</a> within their developer documentation. But the differences between logic and application tests are not entirely clear within the documentation.</p>

<p>Logic tests are described as more traditional unit tests, give a method some input A and assert that output B is returned. Application tests are described more as integration tests, where a real device is required. This is great from philosophical perspective, but does not explain the technical differences between the two target types. There has been some discussion on StackOverflow about the precise differences between the two testing types. Some people have suggested that logic tests will only include the Foundation framework, whereas application tests will include the full UIKit framework. In reality though this is not the case. The differences between the two are purely on how the tests are linked to the main executable. Logic tests lack the test bundle linking required to run them from outside of Xcode. Application tests include the correct bundle linking.</p>

<p>For the sake of clarity I am going to ignore Apple&#8217;s philosophical distinction between <em>logic tests</em> (unit tests) and <em>application tests</em> (integration tests) from this point onwards. Instead lets construct this simple assumption; Apple broke the API for testing code from the command line and did not do a very good job of explaining why. With that we can all feel a little better and continue.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Sam de Freyssinet</span></span>

      








  


<time datetime="2013-03-10T15:53:00-05:00" pubdate data-updated="true">Mar 10<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/continuous-integration/'>continuous-integration</a>, <a class='category' href='/blog/categories/ios/'>ios</a>, <a class='category' href='/blog/categories/jenkins/'>jenkins</a>, <a class='category' href='/blog/categories/ocunit/'>ocunit</a>, <a class='category' href='/blog/categories/xcode/'>xcode</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://def.reyssi.net/blog/2013/03/10/running-application-unit-tests-from-the-command-line-in-xcode-4-dot-6/" data-via="samsoir" data-counturl="http://def.reyssi.net/blog/2013/03/10/running-application-unit-tests-from-the-command-line-in-xcode-4-dot-6/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/01/01/compiling-libzmq-as-a-universal-static-library-for-iOS/" title="Previous Post: Compiling libzmq as a universal static library for iOS">&laquo; Compiling libzmq as a universal static library for iOS</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/10/running-application-unit-tests-from-the-command-line-in-xcode-4-dot-6/">Running application unit tests from the command line in Xcode 4.6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/01/compiling-libzmq-as-a-universal-static-library-for-iOS/">Compiling libzmq as a universal static library for iOS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/08/windycitygo-mobile-conference-day-1/">WindyCityGo Mobile Conference Day 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/31/refactored-phonegap-ios-datepicker/">Refactoring the PhoneGap iOS DatePicker</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/26/dns-woes/">DNS woes</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("samsoir", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/samsoir" class="twitter-follow-button" data-show-count="false">Follow @samsoir</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/10477997497093166029?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Sam de Freyssinet -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
